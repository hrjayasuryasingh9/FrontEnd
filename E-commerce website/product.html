<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <nav class="navbar navbar-expand-lg bg-body-black py-3 sticky-top">
      <div
        class="container-fluid d-flex justify-content-between align-items-center main-nav"
      >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class=""><i class="fa-solid fa-bars"></i></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto w-50">
            <li class="nav-item">
              <a class="mx-3 A" href="./index.html">HOME</a>
            </li>
            <li class="nav-item">
              <a class="mx-3 A" href="./index.html">COLLECTIONS</a>
            </li>
            <li class="nav-item">
              <a class="mx-3 A" href="./index.html">PRODUCTS</a>
            </li>
            <li class="nav-item">
              <a class="mx-3 A" href="./index.html">BLOGS</a>
            </li>
            <li class="nav-item">
              <a class="mx-3 A" href="./index.html">CONTACT</a>
            </li>
          </ul>
        </div>
        <a class="A navbarbrand" href="#">HOMIES CLOTHINGS</a>
        <a class="Cart" href="cart.html"
          ><i class="fa-solid fa-cart-shopping"></i
        ></a>
      </div>
    </nav>

    <section class="Product-View">
      <div class="container-fluid p-5">
        <div class="row p-3">
          <div class="col-lg-6 m-auto d-flex justify-content-center">
            <img
              src="./assets/products/f1.jpg"
              alt=""
              class="img-fluid product-image"
            />
          </div>
          <div class="col-lg-6 m-auto d-flex justify-content-center">
            <div class="pd my-5">
              <h1 class="Product-name">Plaza Phant - Zara</h1>
              <div class="Ratings my-3 d-flex">
                <i class="fa-solid fa-star my-1"></i>
                <i class="fa-solid fa-star my-1"></i>
                <i class="fa-solid fa-star my-1"></i>
                <i class="fa-solid fa-star my-1"></i>
                <i class="fa-regular fa-star my-1"></i>
                <p class="mx-3">35 reviews</p>
              </div>
              <p class="px-1 price">$134.90</p>

              <!-- Size buttons -->
              <div class="sizes mb-3">
                <label for="size" class="form-label">Sizes:</label>
                <div class="btn-group" role="group" id="sizeButtons">
                  <button type="button" class="btnsn" data-size="S">S</button>
                  <button type="button" class="btnsn" data-size="M">M</button>
                  <button type="button" class="btnsn" data-size="L">L</button>
                  <button type="button" class="btnsn" data-size="XL">XL</button>
                </div>
              </div>

              <!-- Quantity selector -->
              <div class="quantity mb-3">
                <label for="quantity" class="form-label">Quantity:</label>
                <div class="input-group">
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="btn-minus"
                  >
                    -
                  </button>
                  <input
                    type="number"
                    class="form-control"
                    id="quantity"
                    value="1"
                    min="1"
                    max="10"
                  />
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="btn-plus"
                  >
                    +
                  </button>
                </div>
              </div>
              <button class="cart" id="cart">Add to Cart</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      // Load the selected product from localStorage
      const selectedProduct = JSON.parse(
        localStorage.getItem("selectedProduct")
      );

      // Function to dynamically update the product details
      function updateProductDetails(product) {
        if (product) {
          document.querySelector(".product-image").src = product.image;
          document.querySelector(".Product-name").textContent = product.text;
          document.querySelector(".price").textContent = product.price;
        }
      }

      // Call the function to update product details
      updateProductDetails(selectedProduct);

      // Size Selection Logic
      const sizeButtons = document.querySelectorAll("#sizeButtons .btnsn");
      let selectedSize = "";

      sizeButtons.forEach((button) => {
        button.addEventListener("click", () => {
          sizeButtons.forEach((btn) => btn.classList.remove("selected"));
          button.classList.add("selected");
          selectedSize = button.getAttribute("data-size");
        });
      });

      // Quantity Adjustment Logic
      const quantityInput = document.getElementById("quantity");
      const btnPlus = document.getElementById("btn-plus");
      const btnMinus = document.getElementById("btn-minus");

      btnPlus.addEventListener("click", () => {
        let currentValue = parseInt(quantityInput.value);
        if (currentValue < 10) {
          quantityInput.value = currentValue + 1;
        }
      });

      btnMinus.addEventListener("click", () => {
        let currentValue = parseInt(quantityInput.value);
        if (currentValue > 1) {
          quantityInput.value = currentValue - 1;
        }
      });

      document.getElementById("cart").addEventListener("click", () => {
        const productDetails = {
          name: document.querySelector(".Product-name").textContent,
          image: document.querySelector(".product-image").src,
          price: document.querySelector(".price").textContent,
          size: selectedSize || "M",
          quantity: quantityInput.value,
        };

        // Save the product details in localStorage
        let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
        cartItems.push(productDetails);
        localStorage.setItem("cartItems", JSON.stringify(cartItems));
        alert("Product added to cart!");

        // Redirect to the cart page
        window.location.href = "cart.html";
      });
    </script>
  </body>
</html>
